{"version":3,"sources":["auto-reload.js","app.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,CAAC,YAAW;AACV,MAAI,YAAY,OAAO,SAAP,IAAoB,OAAO,YAAP,CAD1B;AAEV,MAAI,KAAK,OAAO,MAAP,GAAiB,OAAO,MAAP,IAAiB,EAAjB,CAFhB;AAGV,MAAI,KAAK,GAAG,aAAH,IAAqB,GAAG,aAAH,KAAqB,EAArB,CAHpB;AAIV,MAAI,CAAC,SAAD,IAAc,GAAG,QAAH,EAAa,OAA/B;;AAEA,MAAI,cAAc,SAAd,WAAc,CAAS,GAAT,EAAa;AAC7B,QAAI,OAAO,KAAK,KAAL,CAAW,KAAK,GAAL,KAAa,IAAb,CAAX,CAA8B,QAA9B,EAAP,CADyB;AAE7B,UAAM,IAAI,OAAJ,CAAY,yBAAZ,EAAuC,EAAvC,CAAN,CAF6B;AAG7B,WAAO,OAAO,IAAI,OAAJ,CAAY,GAAZ,KAAoB,CAApB,GAAwB,GAAxB,GAA8B,GAA9B,CAAP,GAA2C,cAA3C,GAA4D,IAA5D,CAHsB;GAAb,CANR;;AAYV,MAAI,UAAU,UAAU,SAAV,CAAoB,WAApB,EAAV,CAZM;AAaV,MAAI,eAAe,GAAG,YAAH,IAAmB,QAAQ,OAAR,CAAgB,QAAhB,IAA4B,CAAC,CAAD,CAbxD;;AAeV,MAAI,YAAY;AACd,UAAM,gBAAU;AACd,aAAO,QAAP,CAAgB,MAAhB,CAAuB,IAAvB,EADc;KAAV;;AAIN,gBAAY,sBAAU;AACpB,SAAG,KAAH,CACG,IADH,CACQ,SAAS,gBAAT,CAA0B,sBAA1B,CADR,EAEG,MAFH,CAEU,UAAS,IAAT,EAAe;AACrB,YAAI,MAAM,KAAK,YAAL,CAAkB,iBAAlB,CAAN,CADiB;AAErB,eAAO,KAAK,IAAL,IAAa,OAAO,OAAP,CAFC;OAAf,CAFV,CAMG,OANH,CAMW,UAAS,IAAT,EAAe;AACtB,aAAK,IAAL,GAAY,YAAY,KAAK,IAAL,CAAxB,CADsB;OAAf,CANX;;;AADoB,UAYhB,YAAJ,EAAkB,WAAW,YAAW;AAAE,iBAAS,IAAT,CAAc,YAAd,CAAF;OAAX,EAA4C,EAAvD,EAAlB;KAZU;GALV,CAfM;AAmCV,MAAI,OAAO,GAAG,IAAH,IAAW,IAAX,CAnCD;AAoCV,MAAI,OAAO,GAAG,MAAH,IAAa,OAAO,QAAP,CAAgB,QAAhB,IAA4B,WAAzC,CApCD;;AAsCV,MAAI,UAAU,SAAV,OAAU,GAAU;AACtB,QAAI,aAAa,IAAI,SAAJ,CAAc,UAAU,IAAV,GAAiB,GAAjB,GAAuB,IAAvB,CAA3B,CADkB;AAEtB,eAAW,SAAX,GAAuB,UAAS,KAAT,EAAe;AACpC,UAAI,GAAG,QAAH,EAAa,OAAjB;AACA,UAAI,UAAU,MAAM,IAAN,CAFsB;AAGpC,UAAI,WAAW,UAAU,OAAV,KAAsB,UAAU,IAAV,CAHD;AAIpC,iBAJoC;KAAf,CAFD;AAQtB,eAAW,OAAX,GAAqB,YAAU;AAC7B,UAAI,WAAW,UAAX,EAAuB,WAAW,KAAX,GAA3B;KADmB,CARC;AAWtB,eAAW,OAAX,GAAqB,YAAU;AAC7B,aAAO,UAAP,CAAkB,OAAlB,EAA2B,IAA3B,EAD6B;KAAV,CAXC;GAAV,CAtCJ;AAqDV,YArDU;CAAX,CAAD;;;;;;;;ACDA,IAAI,SAAS;AACX,wBAAO;AACL,SAAK,MAAL,GAAc,cAAc;AAC1B,aAAO,SAAP;AACA,cAAQ,kCAAR;AACA,iBAAW,kBAAX;KAHY,CAAd,CADK;;AAOL,SAAK,kBAAL,GAPK;AAQL,SAAK,cAAL,GARK;AASL,SAAK,aAAL,GATK;AAUL,SAAK,eAAL,GAVK;AAWL,SAAK,aAAL,GAXK;AAYL,SAAK,mBAAL,GAZK;;AAcL,SAAK,MAAL,CAAY,KAAZ;;;AAdK,GADI;AAmBX,oDAAoB,QAAQ,UAAU;AACpC,QAAI,CAAC,EAAE,GAAF,CAAM,MAAN,wBAAkC,mBAAlC,CAAD,EAAsD;AACxD,cAAQ,IAAR,CAAa,MAAb,EAAqB,QAArB,EADwD;AAExD,aAAO,OAAO,QAAP,CAAP,CAFwD;KAA1D;AAIA,WAAO,OAAO,gBAAP,CAAwB,QAAxB,EAAkC,KAAlC,CAL6B;GAnB3B;AA0BX,wCAAc,OAAO;AACnB,QAAI,OAAO;AACT,WAAK,MAAM,GAAN;AACL,aAAO,MAAM,KAAN;AACP,iBAAW,MAAM,SAAN;KAHT;;;AADe,QAQf,MAAM,YAAN,GAAqB,CAArB,EAAwB;AAC1B,WAAK,QAAL,GAAmB,MAAM,YAAN,cAAnB,CAD0B;KAA5B,MAEO;AACL,WAAK,QAAL,GAAgB,MAAM,WAAN,KAAsB,CAAtB,GAA0B,IAA1B,GAAiC,WAAjC,CADX;KAFP;;;AARmB,QAenB,CAAK,IAAL,GAAY,OAAO,IAAP,CAAY,MAAM,aAAN,CAAZ,CAAiC,MAAjC,CAAwC,eAAxC,CAAZ;;;AAfmB,QAkBnB,CAAK,KAAL,GAAa,OAAO,mBAAP,CAA2B,KAA3B,EAAkC,OAAlC,CAAb,CAlBmB;AAmBnB,SAAK,MAAL,GAAc,OAAO,mBAAP,CAA2B,KAA3B,EAAkC,QAAlC,CAAd,CAnBmB;AAoBnB,SAAK,WAAL,GAAmB,OAAO,mBAAP,CAA2B,KAA3B,EAAkC,aAAlC,CAAnB;;;AApBmB,QAuBnB,CAAK,IAAL,GAAY,MAAM,IAAN;;;AAvBO,QA0BnB,CAAK,YAAL,GAAoB,KAAK,SAAL,CAAe,KAAf,EAAsB,IAAtB,EAA4B,CAA5B,CAApB,CA1BmB;;AA4BnB,WAAO,IAAP,CA5BmB;GA1BV;AAwDX,oDAAqB;AACnB,SAAK,MAAL,CAAY,SAAZ,CACE,cAAc,OAAd,CAAsB,SAAtB,CAAgC;AAC9B,iBAAW,cAAX;AACA,mBAAa,8BAAb;AACA,iBAAW,KAAX;KAHF,CADF,EADmB;GAxDV;AAiEX,4CAAiB;AACf,SAAK,MAAL,CAAY,SAAZ,CACE,cAAc,OAAd,CAAsB,KAAtB,CAA4B;AAC1B,iBAAW,eAAX;AACA,kBAAY;AACV,cAAM,cAAN;OADF;KAFF,CADF,EADe;GAjEN;AA2EX,0CAAgB;AACd,SAAK,MAAL,CAAY,SAAZ,CACE,cAAc,OAAd,CAAsB,cAAtB,CAAqC;AACnC,iBAAW,cAAX;AACA,qBAAe,MAAf;AACA,gBAAU,KAAV;AACA,aAAO,EAAP;AACA,kBAAY;AACV,cAAM,aAAN;AACA,gBAAQ,oBAAR;OAFF;AAIA,iBAAW;AACT,gBAAQ,MAAR;OADF;KATF,CADF,EADc;GA3EL;AA4FX,8CAAkB;AAChB,SAAK,MAAL,CAAY,SAAZ,CACE,cAAc,OAAd,CAAsB,cAAtB,CAAqC;AACnC,iBAAW,iBAAX;AACA,eAAS,CACP,EAAC,MAAM,kBAAN,EAA0B,OAAO,eAAP,EADpB,EAEP,EAAC,MAAM,qCAAN,EAA6C,OAAO,gBAAP,EAFvC,EAGP,EAAC,MAAM,sCAAN,EAA8C,OAAO,kBAAP,EAHxC,CAAT;KAFF,CADF,EADgB;GA5FP;AAwGX,0CAAgB;AACd,QAAI,cAAc,SAAS,cAAT,CAAwB,oBAAxB,EAA8C,SAA9C,CADJ;AAEd,QAAI,gBAAgB,YAAhB,CAFU;AAGd,SAAK,MAAL,CAAY,SAAZ,CACE,cAAc,OAAd,CAAsB,IAAtB,CAA2B;AACzB,iBAAW,cAAX;AACA,mBAAa,EAAb;AACA,kBAAY;AACV,cAAM,aAAN;OADF;AAGA,iBAAW;AACT,eAAO,aAAP;AACA,cAAM,WAAN;OAFF;AAIA,qBAAe;AACb,cAAM,OAAO,aAAP;OADR;KAVF,CADF,EAHc;GAxGL;AA4HX,sDAAsB;AACpB,SAAK,MAAL,CAAY,SAAZ,CACE,cAAc,OAAd,CAAsB,UAAtB,CAAiC;AAC/B,iBAAW,oBAAX;AACA,kBAAY;AACV,cAAM,mBAAN;OADF;KAFF,CADF,EADoB;GA5HX;CAAT;;kBAwIW","file":"public/app.js","sourcesContent":["/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */","let Search = {\n  init() {\n    this.search = instantsearch({\n      appId: 'latency',\n      apiKey: 'c80a1f43b1650d1a2225d95d6df0ffab',\n      indexName: 'smashingmagazine'\n    });\n\n    this.addSearchBoxWidget();\n    this.addStatsWidget();\n    this.addTagsWidget();\n    this.addSortByWidget();\n    this.addHitsWidget();\n    this.addPaginationWidget();\n\n    this.search.start();\n\n    // $('#searching_2').focus();\n  },\n  getHighlightedValue(object, property) {\n    if (!_.has(object, `_highlightResult.${property}.value`)) {\n      console.info(object, property);\n      return object[property];\n    }\n    return object._highlightResult[property].value;\n  },\n  transformItem(input) {\n    let data = {\n      url: input.url,\n      image: input.image,\n      authorUrl: input.authorUrl\n    };\n\n    // Add the number of comments\n    if (input.commentCount > 1) {\n      data.comments = `${input.commentCount} Comments`;\n    } else {\n      data.comments = input.commentCout === 0 ? null : '1 Comment';\n    }\n\n    // Display date in human readable form\n    data.date = moment.unix(input.publishedDate).format('MMMM Do, YYYY');\n\n    // Pass highlighted versions\n    data.title = Search.getHighlightedValue(input, 'title');\n    data.author = Search.getHighlightedValue(input, 'author');\n    data.description = Search.getHighlightedValue(input, 'description');\n\n    // TODO: Highlight tags\n    data.tags = input.tags;\n\n    // Keep a json version of the data, for easy debugging\n    data._initialData = JSON.stringify(input, null, 2);\n\n    return data;\n  },\n  addSearchBoxWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.searchBox({\n        container: '#searching_2',\n        placeholder: 'Search in all Smashing posts',\n        wrapInput: false\n      })\n    );\n  },\n  addStatsWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.stats({\n        container: '#search-stats',\n        cssClasses: {\n          root: 'search-stats'\n        }\n      })\n    );\n  },\n  addTagsWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.refinementList({\n        container: '#search-tags',\n        attributeName: 'tags',\n        operator: 'and',\n        limit: 10,\n        cssClasses: {\n          root: 'search-tags',\n          header: 'search-tags-header'\n        },\n        templates: {\n          header: 'Tags'\n        }\n      })\n    );\n  },\n  addSortByWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.sortBySelector({\n        container: '#search-sort-by',\n        indices: [\n          {name: 'smashingmagazine', label: 'Most relevant'},\n          {name: 'smashingmagazine_comment_count_desc', label: 'Most commented'},\n          {name: 'smashingmagazine_published_date_desc', label: 'Latest published'}\n        ]\n      })\n    );\n  },\n  addHitsWidget() {\n    let hitTemplate = document.getElementById('templateSearch-hit').innerHTML;\n    let emptyTemplate = 'No results';\n    this.search.addWidget(\n      instantsearch.widgets.hits({\n        container: '#search-hits',\n        hitsPerPage: 20,\n        cssClasses: {\n          root: 'search-hits'\n        },\n        templates: {\n          empty: emptyTemplate,\n          item: hitTemplate\n        },\n        transformData: {\n          item: Search.transformItem\n        }\n      })\n    );\n  },\n  addPaginationWidget() {\n    this.search.addWidget(\n      instantsearch.widgets.pagination({\n        container: '#search-pagination',\n        cssClasses: {\n          root: 'search-pagination'\n        }\n      })\n    );\n  }\n};\n\nexport default Search;\n"]}