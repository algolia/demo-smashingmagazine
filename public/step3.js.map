{"version":3,"sources":["app/javascripts/step3.js"],"names":["Search","init","search","instantsearch","appId","apiKey","indexName","addWidget","widgets","searchBox","container","placeholder","wrapInput","hitTemplate","document","getElementById","innerHTML","emptyTemplate","hits","hitsPerPage","cssClasses","root","templates","empty","item","transformData","data","date","moment","unix","publishedDate","format","commentCount","comments","commentCout","start"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAIA,SAAS;AACXC,MADW,kBACJ;;AAEL,QAAIC,SAASC,cAAc;AACzBC,aAAO,SADkB;AAEzBC,cAAQ,kCAFiB;AAGzBC,iBAAW;AAHc,KAAd,CAAb;;AAMA;AACAJ,WAAOK,SAAP,CACEJ,cAAcK,OAAd,CAAsBC,SAAtB,CAAgC;AAC9BC,iBAAW,YADmB;AAE9BC,mBAAa,8BAFiB;AAG9BC,iBAAW;AAHmB,KAAhC,CADF;;AAQA,QAAIC,cAAcC,SAASC,cAAT,CAAwB,oBAAxB,EAA8CC,SAAhE;AACA,QAAIC,gBAAgB,YAApB;AACAf,WAAOK,SAAP,CACEJ,cAAcK,OAAd,CAAsBU,IAAtB,CAA2B;AACzBR,iBAAW,cADc;AAEzBS,mBAAa,EAFY;AAGzBC,kBAAY;AACVC,cAAM;AADI,OAHa;AAMzBC,iBAAW;AACTC,eAAON,aADE;AAETO,cAAMX;AAFG,OANc;AAUzBY,qBAAe;AACbD,cAAM,cAACE,IAAD,EAAU;AACd;AACAA,eAAKC,IAAL,GAAYC,OAAOC,IAAP,CAAYH,KAAKI,aAAjB,EAAgCC,MAAhC,CAAuC,eAAvC,CAAZ;;AAEA;AACA,cAAIL,KAAKM,YAAL,GAAoB,CAAxB,EAA2B;AACzBN,iBAAKO,QAAL,GAAmBP,KAAKM,YAAxB;AACD,WAFD,MAEO;AACLN,iBAAKO,QAAL,GAAgBP,KAAKQ,WAAL,KAAqB,CAArB,GAAyB,IAAzB,GAAgC,WAAhD;AACD;;AAED,iBAAOR,IAAP;AACD;AAbY;AAVU,KAA3B,CADF;;AA6BAxB,WAAOiC,KAAP;AACD;AAlDU,CAAb;;kBAqDenC,M","file":"public/step3.js","sourcesContent":["let Search = {\n  init() {\n\n    let search = instantsearch({\n      appId: 'latency',\n      apiKey: 'c80a1f43b1650d1a2225d95d6df0ffab',\n      indexName: 'smashingmagazine'\n    });\n\n    // Search bar\n    search.addWidget(\n      instantsearch.widgets.searchBox({\n        container: '#searchbar',\n        placeholder: 'Search in all Smashing posts',\n        wrapInput: false\n      })\n    );\n\n    let hitTemplate = document.getElementById('templateSearch-hit').innerHTML;\n    let emptyTemplate = 'No results';\n    search.addWidget(\n      instantsearch.widgets.hits({\n        container: '#search-hits',\n        hitsPerPage: 20,\n        cssClasses: {\n          root: 'search-hits'\n        },\n        templates: {\n          empty: emptyTemplate,\n          item: hitTemplate\n        },\n        transformData: {\n          item: (data) => {\n            // Date in human-readable format\n            data.date = moment.unix(data.publishedDate).format('MMMM Do, YYYY');\n\n            // Number of comments\n            if (data.commentCount > 1) {\n              data.comments = `${data.commentCount} Comments`;\n            } else {\n              data.comments = data.commentCout === 0 ? null : '1 Comment';\n            }\n\n            return data;\n          }\n        }\n      })\n    );\n\n    search.start();\n  }\n};\n\nexport default Search;\n\n"]}